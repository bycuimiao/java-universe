第一章 —— 简介  
1、zookeeper客户端功能包括  
    保障强一致性、有序性、持久性  
    实现通用的同步原语能力  
    ZooKeeper提供了一种简单的并发处理机制
    
2、ZooKeeper不适合海量数据存储

3、ZooKeeper使用共享存储模型来实现应用间的协作和同步原语

4、ZooKeeper的设计尽可能满足CAP（C：一致性 A：可用性 P：分区容错性）中的CP，即一致性和分区容错性。当发生网络分区的时候ZooKeeper只能提供只读服务，可用性降低。

5、Paxos算法和虚拟同步技术

第二章 —— 了解ZooKeeper

1、ZooKeeper另辟蹊径，不直接暴露原语，取而代之，他暴露了有一小部分调用方法组成的类似文件系统的API，以便允许应用实现自己的原语。  
PS：这么做的好处是。直接提供原语API会丧失灵活性

2、ZooKeeper并不允许局部写入或读取znode节点的数据。当设置一个znode节点的数据或读取时，znode节点的内容会被整个替换或全部读取出来  

3、临时znode会在哪种情况下被删除。  
    当创建该节点的客户端因会话超时或主动关闭而终止时  
    主动删除该节点时

4、临时节点不允许拥有子节点

5、有序节点

6、监视与通知。  
通知机制是单次出发的操作，在设置监视的时候，会先读取节点状态。  

7、setData和delete以版本号作为参数，只有版本号一致时才会调用成功。

8、ZooKeeper服务器端运行于两种模式下：独立模式、仲裁模式

9、ZooKeeper法定人数是指仲裁模式下，为了使ZooKeeper工作必须有效运行的服务器最小数量。 

10、zk允许f个服务器崩溃，f为小于集合中服务器数量的一半

11、客户端通过TCP协议与服务器进行连接并通信，但当会话无法与当前连接的服务器继续通信时，会话就可能转移到另一个服务器上。

12、会话挺了顺序保障，这就意味着一个会话中的请求会以FIFO(先进先出)顺序执行  
ps:书中例子没太懂

13、假设会话超时时间为t，在t时间后收不到会话消息，服务会声明会话超时  
客户端侧，t/3未收到消息开始向服务器发送心跳。  
2t/3未收到消息开始寻找其他服务器。  
这是客户端在超时前做的尝试

14、客户端不能连接到这样的服务器：他未发现更新，而客户端却已经发现更新。  
ps:不太好理解，根据书中的图，一起看可以理解。要理解事务标识符，zkid

15、zk临时节点分布式锁

16、
creat -e 创建临时节点  
stat命令可以获得一个znode的属性，并允许设置监视点。当被设置监视点的节点被删除或者会话关闭的时候，会触发NodeDelete事件  
ls /xxx true也可以设置监视点，true这个参数，设置监视点  
create -s 创建顺序节点

第三章 —— 开始使用zk API  

1、启动ZK，并启动客户端，然后停止zk，客户端看会看到Disconnected事件，这时不要重新创建句柄！重新启动服务器即可。zk客户端库负责为你重新连接服务。当不幸遇到网络中断或者服务器故障的时候，zk可以处理这些故障问题。集群作用。会复用句柄。      
不要试着自己去管理zk客户端连接。不要关闭会话后再启动一个新的会话，这样会增加负载，并导致更长时间的中断  

2、dump查看会话信息  

3、如果create执行成了，活动主节点死掉以前，没有任何进程能够成为主节点，如果活动主节点还不知道自己已经获得了管理权，不会有任何进程成为主节点进程  

4、在zk中，所有同步调用方法都有对应的异步调用方法

5、重新处理异步请求连接丢失时，有一个小问题：处理流程可能变得无序，因为zk对请求和响应都会很好的保存顺序，但如果连接丢失，我们又重新发起一个新的请求，就会导致整个时序中出现空隙。因此我们进行一个状态更新请求前，需要先获取当前状态，否则就要放弃更新。我们通过同步的方式进行检查和重试操作  

6、对于ConnectionLossException异常，开发者要检查系统状态并合理恢复  

